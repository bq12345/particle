{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["const WIDTH = window.innerWidth;\nconst HEIGHT = window.innerHeight;\n\nlet canvas = document.getElementById(\"canvas\");\nlet context = canvas.getContext(\"2d\");\n\ncanvas.width = WIDTH;\ncanvas.height = HEIGHT;\n\nconst COORDINATE_LENGTH = 5000;\n\nlet offsetLeft = canvas.offsetLeft;\nlet offsetTop = canvas.offsetTop;\n\nclass Star {\n    constructor(x, y, size, color) {\n        this.x = x;\n        this.y = y;\n        this.size = size;\n        this.color = color;\n    }\n\n    mapXYToCanvasCoordinates(canvasWidth, canvasHeight) {\n        let canvasX = Math.round((this.x / COORDINATE_LENGTH) * canvasWidth);\n        let canvasY = Math.round((this.y / COORDINATE_LENGTH) * canvasHeight);\n        return {\n            x: canvasX,\n            y: canvasY\n        }\n    }\n}\n\nlet StarFactory = {\n    /**\n     * Generates all random values to create a random star\n     * @return {Star} a star with random X/Y, size and color\n     */\n    getRandomStar: function () {\n        let x = Math.floor(Math.random() * (COORDINATE_LENGTH + 1));\n        let y = Math.floor(Math.random() * (COORDINATE_LENGTH + 1));\n        let size = this._getWeightedRandomSize();\n        let color = this._getWeightedRandomColor();\n        let tintedColor = this._applyRandomShade(color);\n        return new Star(x, y, size, this._getRGBColorString(tintedColor));\n    },\n\n    _getWeightedRandomSize: function () {\n        let list = [1, 1.5, 2];\n        let weight = [0.8, 0.15, 0.05];\n        return this._getWeightedRandom(list, weight);\n    },\n\n    _getWeightedRandomColor: function () {\n        let list = [\n            {'r': 255, 'g': 189, 'b': 111},\n            {'r': 255, 'g': 221, 'b': 180},\n            {'r': 255, 'g': 244, 'b': 232},\n            {'r': 251, 'g': 248, 'b': 255},\n            {'r': 202, 'g': 216, 'b': 255},\n            {'r': 170, 'g': 191, 'b': 255},\n            {'r': 155, 'g': 176, 'b': 255}\n        ];\n        let weight = [0.05, 0.05, 0.05, 0.7, 0.05, 0.05, 0.05];\n        return this._getWeightedRandom(list, weight);\n    },\n\n    _getRandomShade: function () {\n        let list = [0.4, 0.6, 1];\n        let weight = [0.5, 0.3, 0.2];\n        return this._getWeightedRandom(list, weight);\n    },\n\n    _applyRandomShade: function (color) {\n        let shade = this._getRandomShade();\n        if (shade !== 1) { // skip processing full brightness stars\n            color['r'] = Math.floor(color['r'] * shade);\n            color['g'] = Math.floor(color['g'] * shade);\n            color['b'] = Math.floor(color['b'] * shade);\n        }\n        return color;\n    },\n\n    _getRGBColorString: function (color) {\n        return 'rgb(' + color['r'] + ',' + color['g'] + ',' + color['b'] + ')';\n    },\n\n    // http://codetheory.in/weighted-biased-random-number-generation-with-javascript-based-on-probability/\n    _getWeightedRandom: function (list, weight) {\n\n        let rand = function (min, max) {\n            return Math.random() * (max - min) + min;\n        };\n\n        let total_weight = weight.reduce(function (prev, cur) {\n            return prev + cur;\n        });\n\n        let random_num = rand(0, total_weight);\n        let weight_sum = 0;\n\n        for (let i = 0; i < list.length; i++) {\n            weight_sum += weight[i];\n            weight_sum = +weight_sum.toFixed(2);\n\n            if (random_num <= weight_sum) {\n                return list[i];\n            }\n        }\n    }\n};\n\nlet stars = [];\n\n\nlet settings = {\n    starDensity: 2.0,\n    mouseScale: 0.5,\n    seedMovement: true\n};\n\nlet totalPixels = WIDTH * HEIGHT;\nlet starRatio = 0.002 * settings.starDensity;\nlet numStars = Math.floor(totalPixels * starRatio);\n\nlet deltaX = 2;\nlet deltaY = 2;\n\nfor (let i = 0; i < numStars; i++) {\n    stars.push(StarFactory.getRandomStar());\n}\n\n// ANIMATION HANDLER\nlet recalcMovement = ()=> {\n    stars.forEach(function (star) {\n        let newX = star.x - deltaX;\n        let newY = star.y - deltaY;\n\n        if (newX < 0) {\n            newX += COORDINATE_LENGTH\n        }\n        if (newY < 0) {\n            newY += COORDINATE_LENGTH\n        }\n        if (newX > COORDINATE_LENGTH) {\n            newX -= COORDINATE_LENGTH\n        }\n        if (newY > COORDINATE_LENGTH) {\n            newY -= COORDINATE_LENGTH\n        }\n\n        star.x = newX;\n        star.y = newY;\n    });\n};\n\nlet draw = ()=> {\n\n    context.clearRect(0, 0, WIDTH, HEIGHT);\n    // iterate stars and draw them\n    stars.forEach((star)=> {\n        let offset = star.mapXYToCanvasCoordinates(WIDTH, HEIGHT);\n\n        context.fillStyle = star.color;\n        context.fillRect(offset.x, offset.y, star.size, star.size);\n    });\n};\n\ncanvas.addEventListener('mousemove', (e)=> {\n\n        let centerX = WIDTH / 2;\n        let centerY = HEIGHT / 2;\n        let distanceX = ((e.pageX - offsetLeft) - centerX);\n        let distanceY = ((e.pageY - offsetTop) - centerY);\n\n        deltaX = Math.round(settings.mouseScale * (distanceX / 100));\n        deltaY = Math.round(settings.mouseScale * (distanceY / 100));\n    }\n);\n\n(function loop() {\n    requestAnimationFrame(loop);\n    recalcMovement();\n    draw();\n})();\n"]}