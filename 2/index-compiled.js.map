{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["let canvas = document.getElementById('canvas');\nlet context = canvas.getContext('2d');\nlet Z = 300;\nlet pause = false;\nlet speed = 0.05;\nlet dots;\nlet animationId;\n\n\ncanvas.width = window.innerWidth;\ncanvas.height = window.innerHeight;\n\nlet getRandomColor = ()=> {\n    return ['#4285f4', '#ea4335', '#fbbc05', '#34a853'][parseInt(Math.random() * 4, 10)];\n};\n\nlet easeInOutQuint = (pos)=> {\n    if ((pos /= 0.5) < 1) return 0.5 * Math.pow(pos, 5);\n    return 0.5 * (Math.pow((pos - 2), 5) + 2);\n};\n\nlet initAnimate = ()=> {\n    for (let i = 0; i < dots.length; i++) {\n        let dot = dots[i];\n        dot.x = Math.random() * canvas.width;\n        dot.y = Math.random() * canvas.height;\n        dot.z = Math.random() * Z * 2 - Z;\n        dot.tx = Math.random() * canvas.width;\n        dot.ty = Math.random() * canvas.height;\n        dot.tz = Math.random() * Z * 2 - Z;\n        dot.paint();\n    }\n    animate();\n};\n\nlet animate = ()=> {\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    for (let i = 0; i < dots.length; i++) {\n        let dot = dots[i];\n        // 回到最初画下时刻的位置\n        if (Math.abs(dot.dx - dot.x) <= speed && Math.abs(dot.dy - dot.y) <= speed && Math.abs(dot.dz - dot.z) <= speed) {\n            dot.x = dot.dx;\n            dot.y = dot.dy;\n            dot.z = dot.dz;\n            cancelAnimationFrame(animationId);\n        } else {\n            // 不断移动\n            dot.x = dot.x + (dot.dx - dot.x) * speed;\n            dot.y = dot.y + (dot.dy - dot.y) * speed;\n            dot.z = dot.z + (dot.dz - dot.z) * speed;\n        }\n        dot.paint();\n    }\n    animationId = requestAnimationFrame(animate);\n};\n\nfunction getTextData(text) {\n    // draw text\n    context.save();\n    context.font = '300px 微软雅黑';\n    context.fillStyle = 'rgba(168,168,168,1)';\n    context.textAlign = 'center';\n    context.textBaseline = 'middle';\n    context.fillText(text, canvas.width / 2, canvas.height / 2);\n    context.restore();\n\n    let imgData = context.getImageData(0, 0, canvas.width, canvas.height);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    let dots = [];\n    for (let x = 0; x < imgData.width; x += 8) {\n        for (let y = 0; y < imgData.height; y += 8) {\n            let i = (y * imgData.width + x) * 4;\n            if (imgData.data[i] >= 128) {\n                let dot = new Dot(x - 2, y - 2, 0, 2);\n                dots.push(dot);\n            }\n        }\n    }\n    return dots;\n}\n\nclass Dot {\n    constructor(centerX, centerY, centerZ, radius) {\n        // 记下原始位置\n        this.dx = centerX;\n        this.dy = centerY;\n        this.dz = centerZ;\n        this.tx = 0;\n        this.ty = 0;\n        this.tz = 0;\n        this.z = centerZ;\n        this.x = centerX;\n        this.y = centerY;\n        this.radius = radius;\n        this.color = getRandomColor();\n    }\n\n    paint() {\n        context.save();\n        context.beginPath();\n        let scale = Z / (Z + this.z);\n        // x,y,radius,startAngle,endAngle,anticlockwise\n        context.arc(canvas.width / 2 + (this.x - canvas.width / 2) * scale, canvas.height / 2 + (this.y - canvas.height / 2) * scale, this.radius * scale, 0, 2 * Math.PI);\n        context.fillStyle = this.color;\n        context.fill();\n        context.restore();\n    }\n}\n\ndots = getTextData('Welcome');\n\ninitAnimate(dots);\n\n// event\nlet $input = document.getElementById('input');\n$input.addEventListener(\"keyup\", (e)=> {\n    if (e.keyCode !== 13) {\n        return;\n    }\n    dots = getTextData($input.value);\n    initAnimate(dots);\n});\n"]}